{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      searchQuery: \"\",\n      currentPage: 1,\n      rowsPerPage: 10,\n      affiliates: [],\n      affiliateOrders: []\n    };\n  },\n  computed: {\n    ...mapGetters([\"getToken\"]),\n    filterAffiliates() {\n      const q = this.searchQuery.toLowerCase();\n      return this.affiliates.filter(a => a.name.toLowerCase().includes(q) || a.code.toLowerCase().includes(q));\n    },\n    totalPages() {\n      return Math.ceil(this.filterAffiliates.length / this.rowsPerPage);\n    },\n    paginatedAffiliates() {\n      const start = (this.currentPage - 1) * this.rowsPerPage;\n      const end = start + this.rowsPerPage;\n      return this.filterAffiliates.slice(start, end);\n    }\n  },\n  mounted() {\n    this.fetchAffiliates();\n    this.fetchAffiliateOrders();\n  },\n  methods: {\n    fetchAffiliates() {\n      axios.get(\"http://localhost:4000/api/affiliates\", {\n        headers: {\n          Authorization: `Bearer ${this.getToken}`\n        }\n      }).then(res => {\n        this.affiliates = res.data.affiliates || [];\n      }).catch(err => {\n        console.error(\"Affiliate fetch error:\", err.response?.data || err);\n      });\n    },\n    fetchAffiliateOrders() {\n      axios.get(\"http://localhost:4000/api/affiliate-orders\", {\n        headers: {\n          Authorization: `Bearer ${this.getToken}`\n        }\n      }).then(res => {\n        this.affiliateOrders = res.data.data || [];\n      }).catch(err => {\n        console.error(\"Affiliate orders error:\", err.response?.data || err);\n      });\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--;\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++;\n    },\n    changePage(page) {\n      this.currentPage = page;\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","axios","data","searchQuery","currentPage","rowsPerPage","affiliates","affiliateOrders","computed","filterAffiliates","q","toLowerCase","filter","a","name","includes","code","totalPages","Math","ceil","length","paginatedAffiliates","start","end","slice","mounted","fetchAffiliates","fetchAffiliateOrders","methods","get","headers","Authorization","getToken","then","res","catch","err","console","error","response","prevPage","nextPage","changePage","page"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\dashboard\\orderlist.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-ody\">\r\n    <div class=\"container-flui\">\r\n      <div class=\"form-head d-flex mb-3 align-items-start\">\r\n        <div class=\"mr-auto d-none d-lg-block\">\r\n          <h2 class=\"text-black font-w600 mb-0\">Affiliates</h2>\r\n          <p class=\"mb-0\">Here is your affiliate list data</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Search + Filters -->\r\n      <div class=\"filter row align-items-center mb-3\">\r\n        <div class=\"col-auto\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-model=\"searchQuery\"\r\n            placeholder=\"Search by Code or Name\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Affiliate List Table -->\r\n      <div class=\"table-container\">\r\n        <table class=\"custom-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Name</th>\r\n              <th>Code</th>\r\n              <th>Link</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              v-for=\"affiliate in paginatedAffiliates\"\r\n              :key=\"affiliate._id\"\r\n              v-if=\"filterAffiliates.length\"\r\n            >\r\n              <td>{{ affiliate._id }}</td>\r\n              <td>{{ affiliate.name }}</td>\r\n              <td>{{ affiliate.code }}</td>\r\n              <td>{{ affiliate.link }}</td>\r\n            </tr>\r\n            <tr v-if=\"!filterAffiliates.length\">\r\n              <td colspan=\"4\" class=\"text-center\">No affiliates found.</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div class=\"pagination mt-3\">\r\n        <button\r\n          class=\"pagination-btn\"\r\n          :disabled=\"currentPage === 1\"\r\n          @click=\"prevPage\"\r\n        >\r\n          Previous\r\n        </button>\r\n        <button\r\n          v-for=\"page in totalPages\"\r\n          :key=\"page\"\r\n          class=\"pagination-btn\"\r\n          :class=\"{ active: currentPage === page }\"\r\n          @click=\"changePage(page)\"\r\n        >\r\n          {{ page }}\r\n        </button>\r\n        <button\r\n          class=\"pagination-btn\"\r\n          :disabled=\"currentPage === totalPages\"\r\n          @click=\"nextPage\"\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Affiliate Orders Table -->\r\n      <div class=\"mt-5\">\r\n        <h4 class=\"text-black font-w600 mb-3\">Affiliate Orders</h4>\r\n        <div class=\"table-container\">\r\n          <table class=\"custom-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Reference</th>\r\n                <th>Affiliate Name</th>\r\n                <th>Code</th>\r\n                <th>Event Title</th>\r\n                <th>Price ($)</th>\r\n                <th>Date</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                v-for=\"order in affiliateOrders\"\r\n                :key=\"order.reference\"\r\n                v-if=\"affiliateOrders.length\"\r\n              >\r\n                <td>{{ order.reference }}</td>\r\n                <td>{{ order.affiliateName }}</td>\r\n                <td>{{ order.affiliateCode }}</td>\r\n                <td>{{ order.title }}</td>\r\n                <td>{{ order.price }}</td>\r\n                <td>{{ new Date(order.createdAt).toLocaleDateString() }}</td>\r\n              </tr>\r\n              <tr v-if=\"!affiliateOrders.length\">\r\n                <td colspan=\"6\" class=\"text-center\">No affiliate orders yet.</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchQuery: \"\",\r\n      currentPage: 1,\r\n      rowsPerPage: 10,\r\n      affiliates: [],\r\n      affiliateOrders: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getToken\"]),\r\n\r\n    filterAffiliates() {\r\n      const q = this.searchQuery.toLowerCase();\r\n      return this.affiliates.filter(\r\n        (a) =>\r\n          a.name.toLowerCase().includes(q) ||\r\n          a.code.toLowerCase().includes(q)\r\n      );\r\n    },\r\n\r\n    totalPages() {\r\n      return Math.ceil(this.filterAffiliates.length / this.rowsPerPage);\r\n    },\r\n\r\n    paginatedAffiliates() {\r\n      const start = (this.currentPage - 1) * this.rowsPerPage;\r\n      const end = start + this.rowsPerPage;\r\n      return this.filterAffiliates.slice(start, end);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchAffiliates();\r\n    this.fetchAffiliateOrders();\r\n  },\r\n  methods: {\r\n    fetchAffiliates() {\r\n      axios\r\n        .get(\"http://localhost:4000/api/affiliates\", {\r\n          headers: {\r\n            Authorization: `Bearer ${this.getToken}`,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.affiliates = res.data.affiliates || [];\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"Affiliate fetch error:\", err.response?.data || err);\r\n        });\r\n    },\r\n    fetchAffiliateOrders() {\r\n      axios\r\n        .get(\"http://localhost:4000/api/affiliate-orders\", {\r\n          headers: {\r\n            Authorization: `Bearer ${this.getToken}`,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.affiliateOrders = res.data.data || [];\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"Affiliate orders error:\", err.response?.data || err);\r\n        });\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) this.currentPage--;\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) this.currentPage++;\r\n    },\r\n    changePage(page) {\r\n      this.currentPage = page;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.tes{\r\n  text-transform: none !important;\r\n}\r\n.custom-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  padding: 10px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.custom-table th {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.custom-table td button {\r\n  padding: 5px 10px;\r\n  font-size: 14px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.custom-table td .dropdown-menu {\r\n  margin-top: 5px;\r\n}\r\n\r\n.custom-table td .dropdown-menu button {\r\n  width: 100%;\r\n  text-align: left;\r\n}\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 10px;\r\n}\r\n\r\n.pagination button {\r\n  border: 1px solid #ccc;\r\n  background-color: #fff;\r\n  color: #000;\r\n  padding: 5px 10px;\r\n  margin: 0 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination button.active {\r\n  background-color: #f4a213;\r\n  color: #fff;\r\n}\r\n\r\n.filter {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.filter label {\r\n  margin-right: 5px;\r\n}\r\n.table-container {\r\n  overflow-x: auto;\r\n}\r\n\r\n.scrollable-tbody {\r\n  display: block;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}