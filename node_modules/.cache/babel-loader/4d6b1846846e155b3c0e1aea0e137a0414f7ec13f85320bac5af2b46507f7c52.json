{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport axiosInstance from \"../../helpers/axiosInstance\";\nconst state = {\n  categories: [],\n  spinner: false,\n  categoryID: \"\",\n  product: {\n    title: \"\",\n    description: \"\",\n    currency: \"\",\n    tag: \"\",\n    price: \"\",\n    event: {\n      startDate: \"\",\n      endDate: \"\",\n      startTime: \"\",\n      timezone: \"UTC\",\n      location: \"\"\n    }\n  },\n  address: \"\",\n  eventType: \"single\",\n  eventFrequency: \"\",\n  photos: [],\n  previewUrl: null,\n  tickets: [{\n    name: \"\",\n    price: null,\n    quantity: null\n  }]\n};\nconst getters = {\n  getCategories: state => state.categories,\n  getSpinner: state => state.spinner,\n  getProduct: state => state.product,\n  getTickets: state => state.tickets\n};\nconst actions = {\n  async fetchCategories({\n    commit\n  }) {\n    try {\n      const res = await axiosInstance.get(\"/categories\");\n      commit(\"setCategories\", res.data.categories || res.data);\n    } catch (error) {\n      console.error(\"Failed to fetch categories:\", error);\n    }\n  },\n  async submitProduct({\n    state,\n    rootGetters,\n    commit\n  }) {\n    commit(\"setSpinner\", true);\n    const formData = new FormData();\n    formData.append(\"categoryID\", state.categoryID);\n    formData.append(\"title\", state.product.title);\n    formData.append(\"description\", state.product.description);\n    formData.append(\"tag\", state.product.tag);\n    formData.append(\"price\", state.product.price);\n    formData.append(\"currency\", state.product.currency);\n    formData.append(\"eventDate\", new Date(state.product.event.startDate).toISOString());\n    if (state.product.event.endDate) {\n      formData.append(\"endDate\", new Date(state.product.event.endDate).toISOString());\n    }\n    formData.append(\"startTime\", state.product.event.startTime + \" \");\n    formData.append(\"timezone\", state.product.event.timezone);\n    formData.append(\"locationName\", state.address);\n    if (state.eventType === \"recurring\") {\n      formData.append(\"eventFrequency\", state.eventFrequency);\n    }\n    formData.append(\"tickets\", JSON.stringify(state.tickets));\n    state.photos.forEach(photo => {\n      formData.append(\"photos\", photo);\n    });\n    try {\n      const response = await axiosInstance.post(\"/products\", formData, {\n        headers: {\n          Authorization: `Bearer ${rootGetters.getToken}`,\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      console.log(\"Product created:\", response.data);\n      alert(\"Event created successfully!\");\n    } catch (error) {\n      if (error.response && error.response.status === 401) {\n        localStorage.removeItem(\"token\");\n        router.push(\"/login\");\n      } else {\n        throw error;\n      }\n    }\n    commit(\"setSpinner\", false);\n  }\n};\nconst mutations = {\n  setCategories(state, payload) {\n    state.categories = payload;\n  },\n  setSpinner(state, val) {\n    state.spinner = val;\n  },\n  setCategoryID(state, id) {\n    state.categoryID = id;\n  },\n  updateProduct(state, payload) {\n    state.product = {\n      ...state.product,\n      ...payload\n    };\n  },\n  updateTickets(state, tickets) {\n    state.tickets = tickets;\n  },\n  addTicket(state, ticket) {\n    state.tickets.push(ticket);\n  },\n  removeTicket(state, index) {\n    state.tickets.splice(index, 1);\n  },\n  duplicateTicket(state, index) {\n    const ticket = state.tickets[index];\n    state.tickets.splice(index + 1, 0, {\n      ...ticket\n    });\n  },\n  setPhotos(state, files) {\n    state.photos = files;\n  },\n  setPreviewUrl(state, url) {\n    state.previewUrl = url;\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n};","map":{"version":3,"names":["axiosInstance","state","categories","spinner","categoryID","product","title","description","currency","tag","price","event","startDate","endDate","startTime","timezone","location","address","eventType","eventFrequency","photos","previewUrl","tickets","name","quantity","getters","getCategories","getSpinner","getProduct","getTickets","actions","fetchCategories","commit","res","get","data","error","console","submitProduct","rootGetters","formData","FormData","append","Date","toISOString","JSON","stringify","forEach","photo","response","post","headers","Authorization","getToken","log","alert","status","localStorage","removeItem","router","push","mutations","setCategories","payload","setSpinner","val","setCategoryID","id","updateProduct","updateTickets","addTicket","ticket","removeTicket","index","splice","duplicateTicket","setPhotos","files","setPreviewUrl","url","namespaced"],"sources":["C:/Users/ajib/OneDrive/Desktop/xASn2901-Daredevil/event-ticket-frontend/src/store/modules/events.js"],"sourcesContent":["import axiosInstance from \"../../helpers/axiosInstance\";\r\n\r\nconst state = {\r\n  categories: [],\r\n  spinner: false,\r\n  categoryID: \"\",\r\n  product: {\r\n    title: \"\",\r\n    description: \"\",\r\n    currency: \"\",\r\n    tag: \"\",\r\n    price: \"\",\r\n    event: {\r\n      startDate: \"\",\r\n      endDate: \"\",\r\n      startTime: \"\",\r\n      timezone: \"UTC\",\r\n      location: \"\",\r\n    },\r\n  },\r\n  address: \"\",\r\n  eventType: \"single\",\r\n  eventFrequency: \"\",\r\n  photos: [],\r\n  previewUrl: null,\r\n  tickets: [{ name: \"\", price: null, quantity: null }],\r\n};\r\n\r\nconst getters = {\r\n  getCategories: (state) => state.categories,\r\n  getSpinner: (state) => state.spinner,\r\n  getProduct: (state) => state.product,\r\n  getTickets: (state) => state.tickets,\r\n};\r\n\r\nconst actions = {\r\n  async fetchCategories({ commit }) {\r\n    try {\r\n      const res = await axiosInstance.get(\"/categories\");\r\n      commit(\"setCategories\", res.data.categories || res.data);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch categories:\", error);\r\n    }\r\n  },\r\n\r\n  async submitProduct({ state, rootGetters, commit }) {\r\n    commit(\"setSpinner\", true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"categoryID\", state.categoryID);\r\n    formData.append(\"title\", state.product.title);\r\n    formData.append(\"description\", state.product.description);\r\n    formData.append(\"tag\", state.product.tag);\r\n    formData.append(\"price\", state.product.price);\r\n    formData.append(\"currency\", state.product.currency);\r\n\r\n    formData.append(\"eventDate\", new Date(state.product.event.startDate).toISOString());\r\n    if (state.product.event.endDate) {\r\n      formData.append(\"endDate\", new Date(state.product.event.endDate).toISOString());\r\n    }\r\n\r\n    formData.append(\"startTime\", state.product.event.startTime + \" \");\r\n    formData.append(\"timezone\", state.product.event.timezone);\r\n    formData.append(\"locationName\", state.address);\r\n\r\n    if (state.eventType === \"recurring\") {\r\n      formData.append(\"eventFrequency\", state.eventFrequency);\r\n    }\r\n\r\n    formData.append(\"tickets\", JSON.stringify(state.tickets));\r\n    state.photos.forEach((photo) => {\r\n      formData.append(\"photos\", photo);\r\n    });\r\n\r\n    try {\r\n      const response = await axiosInstance.post(\"/products\", formData, {\r\n        headers: {\r\n          Authorization: `Bearer ${rootGetters.getToken}`,\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n\r\n      console.log(\"Product created:\", response.data);\r\n      alert(\"Event created successfully!\");\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 401) {\r\n        localStorage.removeItem(\"token\");\r\n        router.push(\"/login\");\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    commit(\"setSpinner\", false);\r\n  },\r\n};\r\n\r\nconst mutations = {\r\n  setCategories(state, payload) {\r\n    state.categories = payload;\r\n  },\r\n  setSpinner(state, val) {\r\n    state.spinner = val;\r\n  },\r\n  setCategoryID(state, id) {\r\n    state.categoryID = id;\r\n  },\r\n  updateProduct(state, payload) {\r\n    state.product = { ...state.product, ...payload };\r\n  },\r\n  updateTickets(state, tickets) {\r\n    state.tickets = tickets;\r\n  },\r\n  addTicket(state, ticket) {\r\n    state.tickets.push(ticket);\r\n  },\r\n  removeTicket(state, index) {\r\n    state.tickets.splice(index, 1);\r\n  },\r\n  duplicateTicket(state, index) {\r\n    const ticket = state.tickets[index];\r\n    state.tickets.splice(index + 1, 0, { ...ticket });\r\n  },\r\n  setPhotos(state, files) {\r\n    state.photos = files;\r\n  },\r\n  setPreviewUrl(state, url) {\r\n    state.previewUrl = url;\r\n  },\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}