{"ast":null,"code":"import axios from \"axios\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  data() {\n    return {\n      products: [],\n      selectedProductId: null,\n      affiliateName: \"\",\n      affiliateCode: \"\",\n      affiliateLink: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters([\"getToken\"]) // Vuex getter for auth token\n  },\n\n  methods: {\n    // Fetch products from backend\n    async fetchProducts() {\n      try {\n        const res = await axios.get(\"http://localhost:4000/api/user/products\", {\n          headers: {\n            Authorization: `Bearer ${this.getToken}`\n          }\n        });\n        console.log(\"Fetched products:\", res.data);\n        this.products = res.data.products;\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    },\n    // Create affiliate link\n    async createAffiliate() {\n      if (!this.selectedProductId) {\n        alert(\"Please select a product!\");\n        return;\n      }\n      if (!this.affiliateName || !this.affiliateCode) {\n        alert(\"Please fill in both name and code!\");\n        return;\n      }\n      try {\n        const res = await axios.post(\"http://localhost:4000/api/affiliate\", {\n          name: this.affiliateName,\n          code: this.affiliateCode,\n          productId: this.selectedProductId\n        }, {\n          headers: {\n            Authorization: `Bearer ${this.getToken}`\n          }\n        });\n        console.log(\"Affiliate created:\", res.data);\n        this.affiliateLink = res.data.link;\n        alert(\"Affiliate link created!\");\n      } catch (error) {\n        console.error(\"Error creating affiliate:\", error);\n        alert(\"Failed to create affiliate link!\");\n      }\n    }\n  },\n  mounted() {\n    this.fetchProducts();\n  }\n};","map":{"version":3,"names":["axios","mapGetters","data","products","selectedProductId","affiliateName","affiliateCode","affiliateLink","computed","methods","fetchProducts","res","get","headers","Authorization","getToken","console","log","error","createAffiliate","alert","post","name","code","productId","link","mounted"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\rex.vue"],"sourcesContent":["<template>\r\n  <div class=\"affiliate-container\">\r\n    <h2>Create Affiliate Link</h2>\r\n\r\n    <!-- Product Selection -->\r\n    <div>\r\n      <label>Select Product:</label>\r\n      <select v-model=\"selectedProductId\">\r\n        <option value=\"\" disabled>Select a product</option>\r\n        <option v-for=\"p in products\" :key=\"p._id\" :value=\"p._id\">\r\n          {{ p.title }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Affiliate Name -->\r\n    <div>\r\n      <label>Affiliate Name:</label>\r\n      <input v-model=\"affiliateName\" type=\"text\" placeholder=\"Enter name\" />\r\n    </div>\r\n\r\n    <!-- Affiliate Code -->\r\n    <div>\r\n      <label>Affiliate Code:</label>\r\n      <input v-model=\"affiliateCode\" type=\"text\" placeholder=\"Enter code\" />\r\n    </div>\r\n\r\n    <!-- Generate Link Button -->\r\n    <button @click=\"createAffiliate\">Generate Affiliate Link</button>\r\n\r\n    <!-- Display Generated Link -->\r\n    <div v-if=\"affiliateLink\">\r\n      <p>\r\n        Affiliate Link:\r\n        <a :href=\"affiliateLink\" target=\"_blank\">{{ affiliateLink }}</a>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      selectedProductId: null,\r\n      affiliateName: \"\",\r\n      affiliateCode: \"\",\r\n      affiliateLink: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getToken\"]), // Vuex getter for auth token\r\n  },\r\n  methods: {\r\n    // Fetch products from backend\r\n    async fetchProducts() {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:4000/api/user/products\", {\r\n          headers: {\r\n            Authorization: `Bearer ${this.getToken}`,\r\n          },\r\n        });\r\n        console.log(\"Fetched products:\", res.data);\r\n        this.products = res.data.products;\r\n      } catch (error) {\r\n        console.error(\"Error fetching products:\", error);\r\n      }\r\n    },\r\n\r\n    // Create affiliate link\r\n    async createAffiliate() {\r\n      if (!this.selectedProductId) {\r\n        alert(\"Please select a product!\");\r\n        return;\r\n      }\r\n      if (!this.affiliateName || !this.affiliateCode) {\r\n        alert(\"Please fill in both name and code!\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await axios.post(\r\n          \"http://localhost:4000/api/affiliate\",\r\n          {\r\n            name: this.affiliateName,\r\n            code: this.affiliateCode,\r\n            productId: this.selectedProductId,\r\n          },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${this.getToken}`,\r\n            },\r\n          }\r\n        );\r\n\r\n        console.log(\"Affiliate created:\", res.data);\r\n        this.affiliateLink = res.data.link;\r\n        alert(\"Affiliate link created!\");\r\n      } catch (error) {\r\n        console.error(\"Error creating affiliate:\", error);\r\n        alert(\"Failed to create affiliate link!\");\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchProducts();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.affiliate-container {\r\n  max-width: 500px;\r\n  margin: auto;\r\n  padding: 20px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 8px;\r\n}\r\n.affiliate-container div {\r\n  margin-bottom: 10px;\r\n}\r\nbutton {\r\n  padding: 8px 16px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"mappings":"AAyCA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,UAAS,QAAS,MAAM;AAEjC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,iBAAiB,EAAE,IAAI;MACvBC,aAAa,EAAE,EAAE;MACjBC,aAAa,EAAE,EAAE;MACjBC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGP,UAAU,CAAC,CAAC,UAAU,CAAC,CAAC,CAAE;EAC/B,CAAC;;EACDQ,OAAO,EAAE;IACP;IACA,MAAMC,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMX,KAAK,CAACY,GAAG,CAAC,yCAAyC,EAAE;UACrEC,OAAO,EAAE;YACPC,aAAa,EAAG,UAAS,IAAI,CAACC,QAAS;UACzC;QACF,CAAC,CAAC;QACFC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEN,GAAG,CAACT,IAAI,CAAC;QAC1C,IAAI,CAACC,QAAO,GAAIQ,GAAG,CAACT,IAAI,CAACC,QAAQ;MACnC,EAAE,OAAOe,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;IACF,CAAC;IAED;IACA,MAAMC,eAAeA,CAAA,EAAG;MACtB,IAAI,CAAC,IAAI,CAACf,iBAAiB,EAAE;QAC3BgB,KAAK,CAAC,0BAA0B,CAAC;QACjC;MACF;MACA,IAAI,CAAC,IAAI,CAACf,aAAY,IAAK,CAAC,IAAI,CAACC,aAAa,EAAE;QAC9Cc,KAAK,CAAC,oCAAoC,CAAC;QAC3C;MACF;MAEA,IAAI;QACF,MAAMT,GAAE,GAAI,MAAMX,KAAK,CAACqB,IAAI,CAC1B,qCAAqC,EACrC;UACEC,IAAI,EAAE,IAAI,CAACjB,aAAa;UACxBkB,IAAI,EAAE,IAAI,CAACjB,aAAa;UACxBkB,SAAS,EAAE,IAAI,CAACpB;QAClB,CAAC,EACD;UACES,OAAO,EAAE;YACPC,aAAa,EAAG,UAAS,IAAI,CAACC,QAAS;UACzC;QACF,CACF,CAAC;QAEDC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEN,GAAG,CAACT,IAAI,CAAC;QAC3C,IAAI,CAACK,aAAY,GAAII,GAAG,CAACT,IAAI,CAACuB,IAAI;QAClCL,KAAK,CAAC,yBAAyB,CAAC;MAClC,EAAE,OAAOF,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjDE,KAAK,CAAC,kCAAkC,CAAC;MAC3C;IACF;EACF,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,CAAChB,aAAa,CAAC,CAAC;EACtB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}