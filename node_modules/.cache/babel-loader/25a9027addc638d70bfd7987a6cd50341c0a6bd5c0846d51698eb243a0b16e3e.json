{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a557ff0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container py-4\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"QR Code Scanner\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 2,\n  class: \"mt-3\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Scanned Reference:\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Ticket Found:\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-danger\"\n}, \"Ticket not found\", -1 /* HOISTED */));\nconst _hoisted_9 = [_hoisted_8];\nconst _hoisted_10 = {\n  key: 3,\n  class: \"alert alert-danger mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_qrcode_stream = _resolveComponent(\"qrcode-stream\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" Button to start scanning \"), !$data.scanning ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.startScanning && $options.startScanning(...args)),\n    class: \"btn btn-primary mb-3\"\n  }, \" Start Scanning \")) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" QR Scanner \"), $data.scanning ? (_openBlock(), _createBlock(_component_qrcode_stream, {\n    key: 1,\n    onDetect: $options.onDetect,\n    onError: $options.onError,\n    paused: false\n  }, null, 8 /* PROPS */, [\"onDetect\", \"onError\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Scan results \"), $data.result ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, [_hoisted_4, _createTextVNode(\" \" + _toDisplayString($data.result), 1 /* TEXT */)]), $data.ticket ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"p\", null, [_hoisted_6, _createTextVNode(\" \" + _toDisplayString($data.ticket.name), 1 /* TEXT */)])])) : $data.notFound ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _hoisted_9)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_8","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","$data","scanning","onClick","_cache","args","$options","startScanning","_createBlock","_component_qrcode_stream","onDetect","onError","paused","result","_hoisted_3","_hoisted_4","_toDisplayString","ticket","_hoisted_5","_hoisted_6","name","notFound","_hoisted_7","_hoisted_9","error","_hoisted_10"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\app\\admin\\scanner.vue"],"sourcesContent":["<template>\r\n  <div class=\"container py-4\">\r\n    <h1>QR Code Scanner</h1>\r\n\r\n    <!-- Button to start scanning -->\r\n    <button v-if=\"!scanning\" @click=\"startScanning\" class=\"btn btn-primary mb-3\">\r\n      Start Scanning\r\n    </button>\r\n\r\n    <!-- QR Scanner -->\r\n    <qrcode-stream\r\n      v-if=\"scanning\"\r\n      @detect=\"onDetect\"\r\n      @error=\"onError\"\r\n      :paused=\"false\"\r\n    />\r\n\r\n    <!-- Scan results -->\r\n    <div v-if=\"result\" class=\"mt-3\">\r\n      <p><strong>Scanned Reference:</strong> {{ result }}</p>\r\n      <div v-if=\"ticket\">\r\n        <p><strong>Ticket Found:</strong> {{ ticket.name }}</p>\r\n      </div>\r\n      <div v-else-if=\"notFound\">\r\n        <p class=\"text-danger\">Ticket not found</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"error\" class=\"alert alert-danger mt-3\">{{ error }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { QrcodeStream } from 'vue-qrcode-reader'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'QRScanner',\r\n  components: { QrcodeStream },\r\n  data() {\r\n    return {\r\n      scanning: false, // controls camera\r\n      result: '',\r\n      ticket: null,\r\n      error: '',\r\n      notFound: false\r\n    }\r\n  },\r\n  methods: {\r\n    startScanning() {\r\n      this.scanning = true\r\n    },\r\n    async onDetect(detectedCodes) {\r\n      const reference = detectedCodes[0]?.rawValue\r\n      this.result = reference\r\n      this.ticket = null\r\n      this.notFound = false\r\n\r\n      try {\r\n        const res = await axios.get(`https://event-ticket-qa70.onrender.com/api/order/${reference}`)\r\n        this.ticket = res.data.order\r\n      } catch (err) {\r\n        if (err.response && err.response.status === 404) {\r\n          this.notFound = true\r\n        } else {\r\n          this.error = 'Server error. Please try again.'\r\n        }\r\n        console.error(err)\r\n      }\r\n    },\r\n    onError(err) {\r\n      console.error(err)\r\n      this.error = 'Camera access or scanning failed.'\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.container {\r\n  max-width: 600px;\r\n  margin: 2rem auto;\r\n  text-align: center;\r\n}\r\n.decode-result {\r\n  margin-top: 1rem;\r\n  font-size: 1.2rem;\r\n}\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAgB;gEACzBC,mBAAA,CAAwB,YAApB,iBAAe;;;EAgBAD,KAAK,EAAC;;gEACpBC,mBAAA,CAAmC,gBAA3B,oBAAkB;;;;gEAExBA,mBAAA,CAA8B,gBAAtB,eAAa;;;;gEAGxBA,mBAAA,CAA2C;EAAxCD,KAAK,EAAC;AAAa,GAAC,kBAAgB;oBAAvCE,UAA2C,C;;;EAI7BF,KAAK,EAAC;;;;uBA3B1BG,mBAAA,CA4BM,OA5BNC,UA4BM,GA3BJC,UAAwB,EAExBC,mBAAA,8BAAiC,E,CAClBC,KAAA,CAAAC,QAAQ,I,cAAvBL,mBAAA,CAES;;IAFiBM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;IAAEX,KAAK,EAAC;KAAuB,kBAE7E,K,mCAEAM,mBAAA,gBAAmB,EAEXC,KAAA,CAAAC,QAAQ,I,cADhBM,YAAA,CAKEC,wBAAA;;IAHCC,QAAM,EAAEJ,QAAA,CAAAI,QAAQ;IAChBC,OAAK,EAAEL,QAAA,CAAAK,OAAO;IACdC,MAAM,EAAE;yFAGXZ,mBAAA,kBAAqB,EACVC,KAAA,CAAAY,MAAM,I,cAAjBhB,mBAAA,CAQM,OARNiB,UAQM,GAPJnB,mBAAA,CAAuD,YAApDoB,UAAmC,E,iBAAA,GAAC,GAAAC,gBAAA,CAAGf,KAAA,CAAAY,MAAM,iB,GACrCZ,KAAA,CAAAgB,MAAM,I,cAAjBpB,mBAAA,CAEM,OAAAqB,UAAA,GADJvB,mBAAA,CAAuD,YAApDwB,UAA8B,E,iBAAA,GAAC,GAAAH,gBAAA,CAAGf,KAAA,CAAAgB,MAAM,CAACG,IAAI,iB,OAElCnB,KAAA,CAAAoB,QAAQ,I,cAAxBxB,mBAAA,CAEM,OAAAyB,UAAA,EAAAC,UAAA,K,0EAGGtB,KAAA,CAAAuB,KAAK,I,cAAhB3B,mBAAA,CAAmE,OAAnE4B,WAAmE,EAAAT,gBAAA,CAAdf,KAAA,CAAAuB,KAAK,oB"},"metadata":{},"sourceType":"module","externalDependencies":[]}