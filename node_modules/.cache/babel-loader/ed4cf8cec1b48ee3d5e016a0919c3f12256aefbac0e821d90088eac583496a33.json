{"ast":null,"code":"// router/guards/isAdmin.js\nimport store from \"../store\";\nexport default async function isAdmin(to, from, next) {\n  try {\n    // If user isn't loaded but a token exists, fetch user\n    if (!store.getters.getUser && localStorage.getItem(\"token\")) {\n      await store.dispatch(\"getUser\");\n    }\n    if (store.getters.isAdmin) {\n      next(); // âœ… Admin allowed\n    } else {\n      next(\"/login\"); // ðŸš« Redirect if not admin\n    }\n  } catch (error) {\n    console.error(\"Admin guard error:\", error);\n    next(\"/login\");\n  }\n}","map":{"version":3,"names":["store","isAdmin","to","from","next","getters","getUser","localStorage","getItem","dispatch","error","console"],"sources":["C:/Users/ajib/OneDrive/Desktop/xASn2901-Daredevil/event-ticket-frontend/src/helpers/isAdmin.js"],"sourcesContent":["// router/guards/isAdmin.js\r\nimport store from \"../store\";\r\n\r\nexport default async function isAdmin(to, from, next) {\r\n  try {\r\n    // If user isn't loaded but a token exists, fetch user\r\n    if (!store.getters.getUser && localStorage.getItem(\"token\")) {\r\n      await store.dispatch(\"getUser\");\r\n    }\r\n\r\n    if (store.getters.isAdmin) {\r\n      next(); // âœ… Admin allowed\r\n    } else {\r\n      next(\"/login\"); // ðŸš« Redirect if not admin\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Admin guard error:\", error);\r\n    next(\"/login\");\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,UAAU;AAE5B,eAAe,eAAeC,OAAOA,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;EACpD,IAAI;IACF;IACA,IAAI,CAACJ,KAAK,CAACK,OAAO,CAACC,OAAO,IAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAE;MAC3D,MAAMR,KAAK,CAACS,QAAQ,CAAC,SAAS,CAAC;IACjC;IAEA,IAAIT,KAAK,CAACK,OAAO,CAACJ,OAAO,EAAE;MACzBG,IAAI,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,MAAM;MACLA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAClB;EACF,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC1CN,IAAI,CAAC,QAAQ,CAAC;EAChB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}