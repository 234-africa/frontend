{"ast":null,"code":"import axios from \"axios\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"PromosPage\",\n  data() {\n    return {\n      promos: [],\n      promois: []\n    };\n  },\n  computed: {\n    ...mapGetters([\"getToken\"])\n  },\n  mounted() {\n    if (this.getToken) {\n      this.fetchMyPromos();\n      this.fetchPromos();\n    }\n  },\n  watch: {\n    getToken(newVal) {\n      if (newVal) {\n        this.fetchMyPromos();\n        this.fetchPromos();\n      }\n    }\n  },\n  methods: {\n    async fetchMyPromos() {\n      try {\n        const res = await axios.get(\"http://localhost:4000/api/my-promos\", {\n          headers: {\n            Authorization: `Bearer ${this.getToken}`\n          }\n        });\n        this.promos = res.data.promos || [];\n      } catch (err) {\n        console.error(\"Error fetching my promos:\", err.response?.data || err.message);\n      }\n    },\n    async fetchPromos() {\n      try {\n        const res = await axios.get(\"http://localhost:4000/api/promo-orders\", {\n          headers: {\n            Authorization: `Bearer ${this.getToken}`\n          }\n        });\n        this.promois = res.data.data || [];\n      } catch (err) {\n        console.error(\"Error fetching promo orders:\", err.response?.data || err.message);\n      }\n    },\n    formatDate(date) {\n      if (!date) return \"-\";\n      return new Date(date).toLocaleDateString();\n    }\n  }\n};","map":{"version":3,"names":["axios","mapGetters","name","data","promos","promois","computed","mounted","getToken","fetchMyPromos","fetchPromos","watch","newVal","methods","res","get","headers","Authorization","err","console","error","response","message","formatDate","date","Date","toLocaleDateString"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\rex.vue"],"sourcesContent":["<template>\r\n  <div class=\"container my-4\">\r\n    <h2 class=\"mb-4\">Promos & Promo Orders</h2>\r\n\r\n    <!-- My Promos -->\r\n    <div class=\"card mb-4 shadow-sm\">\r\n      <div class=\"card-header bg-primary text-white\">\r\n        <h5 class=\"mb-0\">My Promos</h5>\r\n      </div>\r\n      <div class=\"card-body p-0\">\r\n        <table class=\"table table-striped mb-0\">\r\n          <thead>\r\n            <tr>\r\n              <th>Code</th>\r\n              <th>Discount</th>\r\n              <th>Expiry</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-if=\"promos.length === 0\">\r\n              <td colspan=\"4\" class=\"text-center text-muted\">No promos available</td>\r\n            </tr>\r\n            <tr v-for=\"promo in promos\" :key=\"promo._id\">\r\n              <td>{{ promo.code }}</td>\r\n              <td>{{ promo.discount }}%</td>\r\n              <td>{{ formatDate(promo.expiry) }}</td>\r\n              <td>\r\n                <span class=\"badge\" :class=\"promo.active ? 'bg-success' : 'bg-secondary'\">\r\n                  {{ promo.active ? \"Active\" : \"Inactive\" }}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Promo Orders -->\r\n    <div class=\"card shadow-sm\">\r\n      <div class=\"card-header bg-success text-white\">\r\n        <h5 class=\"mb-0\">Promo Orders</h5>\r\n      </div>\r\n      <div class=\"card-body p-0\">\r\n        <table class=\"table table-striped mb-0\">\r\n          <thead>\r\n            <tr>\r\n              <th>Order ID</th>\r\n              <th>Promo Code</th>\r\n              <th>Amount</th>\r\n              <th>Date</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-if=\"promois.length === 0\">\r\n              <td colspan=\"4\" class=\"text-center text-muted\">No promo orders</td>\r\n            </tr>\r\n            <tr v-for=\"order in promois\" :key=\"order._id\">\r\n              <td>{{ order._id }}</td>\r\n              <td>{{ order.promoCode }}</td>\r\n              <td>â‚¦{{ order.amount }}</td>\r\n              <td>{{ formatDate(order.createdAt) }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"PromosPage\",\r\n  data() {\r\n    return {\r\n      promos: [],\r\n      promois: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getToken\"]),\r\n  },\r\n  mounted() {\r\n    if (this.getToken) {\r\n      this.fetchMyPromos();\r\n      this.fetchPromos();\r\n    }\r\n  },\r\n  watch: {\r\n    getToken(newVal) {\r\n      if (newVal) {\r\n        this.fetchMyPromos();\r\n        this.fetchPromos();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchMyPromos() {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:4000/api/my-promos\", {\r\n          headers: { Authorization: `Bearer ${this.getToken}` },\r\n        });\r\n        this.promos = res.data.promos || [];\r\n      } catch (err) {\r\n        console.error(\"Error fetching my promos:\", err.response?.data || err.message);\r\n      }\r\n    },\r\n\r\n    async fetchPromos() {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:4000/api/promo-orders\", {\r\n          headers: { Authorization: `Bearer ${this.getToken}` },\r\n        });\r\n        this.promois = res.data.data || [];\r\n      } catch (err) {\r\n        console.error(\"Error fetching promo orders:\", err.response?.data || err.message);\r\n      }\r\n    },\r\n\r\n    formatDate(date) {\r\n      if (!date) return \"-\";\r\n      return new Date(date).toLocaleDateString();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n.table th,\r\n.table td {\r\n  vertical-align: middle;\r\n}\r\n</style>\r\n"],"mappings":"AAuEA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,UAAS,QAAS,MAAM;AAEjC,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGL,UAAU,CAAC,CAAC,UAAU,CAAC;EAC5B,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACC,QAAQ,EAAE;MACjB,IAAI,CAACC,aAAa,CAAC,CAAC;MACpB,IAAI,CAACC,WAAW,CAAC,CAAC;IACpB;EACF,CAAC;EACDC,KAAK,EAAE;IACLH,QAAQA,CAACI,MAAM,EAAE;MACf,IAAIA,MAAM,EAAE;QACV,IAAI,CAACH,aAAa,CAAC,CAAC;QACpB,IAAI,CAACC,WAAW,CAAC,CAAC;MACpB;IACF;EACF,CAAC;EACDG,OAAO,EAAE;IACP,MAAMJ,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMK,GAAE,GAAI,MAAMd,KAAK,CAACe,GAAG,CAAC,qCAAqC,EAAE;UACjEC,OAAO,EAAE;YAAEC,aAAa,EAAG,UAAS,IAAI,CAACT,QAAS;UAAE;QACtD,CAAC,CAAC;QACF,IAAI,CAACJ,MAAK,GAAIU,GAAG,CAACX,IAAI,CAACC,MAAK,IAAK,EAAE;MACrC,EAAE,OAAOc,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAACG,QAAQ,EAAElB,IAAG,IAAKe,GAAG,CAACI,OAAO,CAAC;MAC/E;IACF,CAAC;IAED,MAAMZ,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMI,GAAE,GAAI,MAAMd,KAAK,CAACe,GAAG,CAAC,wCAAwC,EAAE;UACpEC,OAAO,EAAE;YAAEC,aAAa,EAAG,UAAS,IAAI,CAACT,QAAS;UAAE;QACtD,CAAC,CAAC;QACF,IAAI,CAACH,OAAM,GAAIS,GAAG,CAACX,IAAI,CAACA,IAAG,IAAK,EAAE;MACpC,EAAE,OAAOe,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,GAAG,CAACG,QAAQ,EAAElB,IAAG,IAAKe,GAAG,CAACI,OAAO,CAAC;MAClF;IACF,CAAC;IAEDC,UAAUA,CAACC,IAAI,EAAE;MACf,IAAI,CAACA,IAAI,EAAE,OAAO,GAAG;MACrB,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,CAAC;IAC5C;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}